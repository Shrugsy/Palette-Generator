(this.webpackJsonp3_palette_extractor=this.webpackJsonp3_palette_extractor||[]).push([[0],{62:function(e,a,t){e.exports=t(75)},67:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(8),l=t.n(o),c=(t(67),t(23)),s=t(15),i=t(30),u=t(31),m=t(34),d=t(109),g=t(111),p=t(108),h=t(53),f=t(36),v=t(46),E=t.n(v),b=function(e){var a=Number(e).toString(16);return a.length<2&&(a="0"+a),a},y=function(e){var a=e.colors,t=e.type,n=e.onCopy,o="RGB(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")"),l="#"+a.map((function(e){return b(e)})).join(""),c={width:"50%",backgroundColor:o,cursor:"pointer",textAlign:"center"},s=function(e){var a=document.querySelector("#".concat(t));n(l),console.log("adding class"),a.classList.add("copied"),setTimeout((function(){console.log("removing class"),a&&a.classList.remove("copied")}),3e3)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",width:"100%",height:"70px",margin:"auto",border:"1px solid black"}},r.a.createElement("div",{style:{width:"50%",margin:"auto",backgroundColor:"white"}},r.a.createElement("div",null,r.a.createElement("em",null,t)),r.a.createElement(f.CopyToClipboard,{text:o,onCopy:function(){return s()}},r.a.createElement("div",{className:"rgbString",title:"Click to copy ".concat(o)},o)),r.a.createElement(f.CopyToClipboard,{text:l,onCopy:function(){return s()}},r.a.createElement("div",{className:"hexString",title:"Click to copy ".concat(l)},l))),r.a.createElement(f.CopyToClipboard,{text:l,onCopy:function(){return s()}},r.a.createElement("div",{className:"paletteItemColor",id:t,style:c,title:"Click to copy ".concat(l)},r.a.createElement(E.a,null)))))},S=function(e){var a=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loader",id:"loader-4"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("div",null,a))},k=t(114),w=t(112),C=function(e){var a,t=e.errorMessage,n=e.successMessage,o=e.snackbarShow,l=e.closeSnackbar,c=function(e,a){"clickaway"!==a&&l()};return a=t?"error":"success",r.a.createElement(k.a,{autoHideDuration:3e3,onClose:c,open:o},r.a.createElement(w.a,{onClose:c,severity:a},t,n))},M={width:"100%"},U=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).handleFetchErrors=function(e){return e.ok||t.handleError("".concat(e.status," ").concat(e.statusText)),e},t.handleError=function(e){console.log("error: ",e),t.setState({errorMessage:"Error: ".concat(e),successMessage:"",snackbarShow:!0,loading:!1})},t.closeSnackbar=function(){t.setState({snackbarShow:!1,errorMessage:""})},t.handleCopy=function(e){console.log("handling copy: "+e),t.setState({errorMessage:"",successMessage:"Successfully copied to clipboard: "+e,snackbarShow:!0})},t.state={palettes:{},loading:!1,loadMessage:"",errorMessage:"",successMessage:"",snackbarShow:!1},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchPalettes()}},{key:"componentDidUpdate",value:function(e){this.props.imageUrl!==e.imageUrl&&this.fetchPalettes()}},{key:"checkImage",value:function(e,a,t){var n=new Image;n.onload=a,n.onerror=t,n.src=e}},{key:"fetchPalettes",value:function(){var e=this;this.checkImage(this.props.imageUrl,(function(){e.setState({snackbarShow:!1,palettes:{},loading:!0,loadMessage:"Please wait while your image is being analyzed"},(function(){var a=encodeURIComponent(e.props.imageUrl),t="/api/palette/image=".concat(a);fetch(t).then(e.handleFetchErrors).then((function(e){return e.json()})).then((function(a){e.setState({palettes:a,loading:!1})})).catch((function(e){console.log(e)}))}))}),(function(){e.handleError("Bad image url. Please try a different URL.")}))}},{key:"render",value:function(){var e,a=this.props.imageUrl,t=this.state,n=t.palettes,o=t.loading,l=t.loadMessage,c=t.errorMessage,s=t.successMessage,i=t.snackbarShow;if(Object.keys(n).length>0)for(var u in e=[],n)n.hasOwnProperty(u)&&e.push(r.a.createElement(y,{key:u,colors:n[u].rgb.map((function(e){return Math.round(e)})),type:u,onCopy:this.handleCopy}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{style:M,src:a,alt:""})),r.a.createElement("div",{className:"palette-container"},e,o&&r.a.createElement(S,{message:l}),r.a.createElement(C,{snackbarShow:i,errorMessage:c,successMessage:s,closeSnackbar:this.closeSnackbar}))))}}]),a}(n.Component);var x=function(e,a,t){var n=new Image;n.onload=a,n.onerror=t,n.src=e},j=t(48),O=t(51),P=t.n(O),N={margin:"20px 0 20px 0"},D=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).handleSubmit=function(e){e.preventDefault();var a=document.querySelector("#standard-basic");a.value&&(console.log("new url: ",a.value),t.setState({imageUrl:a.value,validUrl:!0},(function(){a.value=""})))},t.handleDropzoneChange=function(e){t.setState({imageUrl:"",validUrl:!1,loading:!0,loadMessage:"Please wait while image is being uploaded"}),Object(j.a)(e[0],{maxSizeMB:1,maxWidthOrHeight:1920}).then((function(e){var a=e;if(a){var n=new FormData;n.append("image",a),fetch("/image-upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){x(e.url,(function(){t.setState({imageUrl:e.url,validUrl:!0,loading:!1,loadMessage:""})}),(function(){t.setState({imageUrl:e.url,validUrl:!1,loading:!1,loadMessage:""})}))}))}}))},t.state={imageUrl:"",validUrl:!1,loading:!1,loadMessage:""},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.imageUrl,t=e.validUrl,n=e.loading,o=e.loadMessage;return r.a.createElement(g.a,{m:2},"Paste an image URL or upload an image in order to receive a colour palette based on the colours detected in the image.",r.a.createElement("form",{style:N,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{style:{width:"100%",display:"flex"}},r.a.createElement("div",{style:{flexGrow:"100"}},r.a.createElement(d.a,{fullWidth:!0,id:"standard-basic",label:"Image URL"})),r.a.createElement("div",{style:{flexGrow:"0"}},r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Submit URL"))),r.a.createElement("div",{style:{width:"100%",margin:"auto"}},r.a.createElement(h.a,{onDrop:this.handleDropzoneChange},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("section",{className:"dropzone"},r.a.createElement("div",a(),r.a.createElement("input",t({accept:"image/jpeg, image/png, image/bmp"})),r.a.createElement(P.a,null),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"),r.a.createElement("em",null,"(Only *.jpeg, *.png and *.bmp images will be accepted)")))})),n&&r.a.createElement(S,{message:o}))),t&&r.a.createElement(U,{imageUrl:a}))}}]),a}(n.Component),I=t(52),R=t.n(I);var z=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,r.a.createElement(R.a,{fontSize:"large"}),"Palette Generator"),r.a.createElement(D,null))};l.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.e8264617.chunk.js.map